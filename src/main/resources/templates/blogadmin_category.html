<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<link th:href="@{/css/theme.css}" rel="stylesheet" type="text/css">
	<link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
	<title>JBlog</title>
</head>
<body>
	<div class="head_box">
		<div class="text_box">
			<h1 th:text="${ blog.title }"></h1>
			<p th:text="${ blog.tag }"></p>
			<div class="link_box">
				<span><a th:href="@{/logout}">로그아웃</a></span>
				<span><a th:href="@{/blog/main(blogId=${ blog.blogId })}">내 블로그 메인</a></span>
			</div>
		</div>
	</div>
	<br>
	<div class="category_list_box">
		<div class="setting_menu_box">
			<a th:href="@{/blog/admin(blogId=${ blog.blogId })}">기본설정</a>&nbsp;
			<a th:href="@{/blog/admin/category(blogId=${ blog.blogId })}">카테고리</a>&nbsp;
			<a th:href="@{/blog/admin/post(blogId=${ blog.blogId })}">글작성</a>
			<a th:href="@{/blogDeleteRequest(blogId=${ blog.blogId })}">삭제요청</a>
		</div>
		<br>
		<table>
			<tr>
				<th>번호</th>
				<th>카테고리명</th>
				<th>보이기 유형</th>
				<th>포스트 수</th>
				<th>설명</th>
				<th>삭제</th>
			</tr>
			<th:block th:each="category : ${ categorys }">
				<tr>
					<td th:text="${ category.categoryId }"></td>
					<td><a th:href="@{/update/category/view(blogId=${ blog.blogId }, categoryId=${ category.categoryId })}" th:text="${ category.categoryName }"></a></td>
					<td><th:block th:if="${ category.displayType == 'all' }">제목+내용</th:block><th:block th:if="${ category.displayType == 'title' }">제목</th:block></td>
					<td th:text="${ category.cntDisplayPost }"></td>
					<td th:text="${ category.description }"></td>
					<td th:if="${ category.categoryName == '미분류' }">삭제불가</td>
					<td th:unless="${ category.categoryName == '미분류' }"><a th:href="@{/delete/category(blogId=${ blog.blogId }, categoryId=${ category.categoryId })}"><img id="table_delete_img" th:src="@{/images/delete.jpg}" alt="삭제" /></a></td>
				</tr>
			</th:block>
		</table>
	</div>
	<br><br><br>
	<div class="content_box">
		<th:block th:if="${ updateCategory == null }">
			<p>카테고리 추가</p>
			<form action="/insert/category" method="post">
			<input id="blogId" name="blogId" th:value="${ blog.blogId }" type="hidden" />
			<table>
				<tr>
					<th>카테고리명 : </th>
					<td>
						<input id="category_name_input" type="text" name="categoryName">
					</td>
				</tr>
				<tr>
					<th>보이기유형 : </th>
					<td>
						<input type="radio" id="blog_title" name="displayType" value="title">
						<label for="blog_title">제목</label>
						<input type="radio" id="blog_all" name="displayType" value="all">
						<labe for="blog_all">제목+내용</labe>
					</td>
				</tr>
				<tr>
					<th>포스트 수 : </th>
					<td>
						<input id="cnt_display_post_input" type="number" name="cntDisplayPost" min="1" max="20">개(1~20)
					</td>
				</tr>
				<tr>
					<th>설명 : </th>
					<td>
						<input id="description" type="text" name="description">
					</td>
				</tr>
			</table>
			<div class="submit_btn">
				<input id="submit_btn" type="submit" value="확인" />
			</div>
			</form>
		</th:block>
		<th:block th:if="${ updateCategory != null }">
			<p>카테고리 </p>
			<form action="/update/category" method="post">
				<input id="blogId" name="blogId" th:value="${ blog.blogId }" type="hidden" />
				<input id="categoryId" name="categoryId" th:value="${ updateCategory.categoryId }" type="hidden" />
				<table>
					<tr>
						<th>카테고리명 : </th>
						<td>
							<input id="category_name_input" type="text" name="categoryName" th:value="${ updateCategory.categoryName }">
						</td>
					</tr>
					<tr>
						<th>보이기유형 : </th>
						<td>
							<input type="radio" id="blog_title" name="displayType" value="title" th:checked="${ updateCategory.displayType == 'title' }">
							<label for="blog_title">제목</label>
							<input type="radio" id="blog_all" name="displayType" value="all"  th:checked="${ updateCategory.displayType == 'all' }">
							<labe for="blog_all">제목+내용</labe>
						</td>
					</tr>
					<tr>
						<th>포스트 수 : </th>
						<td>
							<input id="cnt_display_post_input" type="number" name="cntDisplayPost" min="1" max="20" th:value="${ updateCategory.cntDisplayPost }">개(1~20)
						</td>
					</tr>
					<tr>
						<th>설명 : </th>
						<td>
							<input id="description" type="text" name="description" th:value="${ updateCategory.description }">
						</td>
					</tr>
				</table>
				<div class="submit_btn">
					<input id="submit_btn" type="submit" value="수정" />
				</div>
			</form>
		</th:block>

	</div>
	<div class="footer">
		<br><br>
		<p>Spring Stories is powered by JBlog</p>
	</div>
</body>
</html>